<!DOCTYPE html>
<div ng-app="quizApp" lang="ru-RU"/>
<head>
    <meta charset="UTF-8">
    <title>Book-Quiz</title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="css/app.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script src="bower_components/bootstrap/ui-bootstrap-tpls-0.13.0.min.js"></script>
</head>
<body>
<div ng-controller="quizBasicController">
    <p>File status: {{readstatus}}</p>
    <h2>{{title}}</h2>
    <form name="quiz">
        <div ng-repeat="question in quiz">
            <strong>{{question._id}}.{{question.question}}</strong>
            <!-- create the true/false radio button for each question-->
            <br/>
            <div class="radiooption">
                <input required
                       name="_id{{question._id}}"
                       type="radio"
                       value="true"
                       ng-model="question.userChoice"
                       ng-change="$parent.checkUserChoice(question._id, true)"/>
                <label for="_id{{question._id}}">{{constants.YES}}</label>
                <br/>
                <input required
                       name="_id{{question._id}}"
                       type="radio"
                       value="false"
                       ng-model="question.userChoice"
                       ng-change="$parent.checkUserChoice(question._id,false)"/>
                <label for="_id{{question._id}}">{{constants.NO}}</label>
            </div>
            <br/>
        </div>
        <!--<div ng-repeat="result in results">-->
        <!--<p>{{result._id}}.{{result.answer}}</p>-->
        <!--</div>-->
    </form>

    <hr/>
    <!--results section-->
    <p>{{pointsEarned}}</p>
    <div ng-init="showAnswers=true">
        <button ng-click="showAnswers=checkQuizCompleted()">Show results</button>
        <div>
            <alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</alert>
        </div>
        <br/>
        <br/>
        <div ng-hide="showAnswers">
            <strong>Results</strong>
            <div ng-repeat="result in results">
                {{result._id}}. <span
                    ng-class="result.correct == constants.CORRECT ? 'correct' : 'incorrect'">
               {{result.correct}} ({{result.points}})
               </span>
            </div>
            <p><strong>Points: </strong><span ng-class="'results'">{{pointsEarned}}/{{pointsToEarn}}</span></p>
            <!--show the results as progress bar splitted to success/errors-->
            <div class="progress">
                <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="{{pointsEarned}}"
                     aria-valuemin="0" aria-valuemax="{{pointsToEarn}}" style="width:{{100*pointsEarned/pointsToEarn}}%">
                    {{pointsEarned}} success
                </div>
                <div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="{{pointsToEarn-pointsEarned}}"
                     aria-valuemin="0" aria-valuemax="{{pointsToEarn}}" style="width:{{100-100*pointsEarned/pointsToEarn}}%">
                    {{pointsToEarn-pointsEarned}} errors
                </div>
            </div>
            <!--now the ANGULAR UI-->
            <div class="row">
            <div class="col-sm-4"><progressbar class="progress-striped active" max="200" value="166" type="danger"><i>166 / 200</i></progressbar></div>
            </div>
        </div>

    </div>
</div>
</body>
<script src="js/app.js" type="text/javascript"></script>
<script src="js/factories/quizBasicFactory.js" type="text/javascript"></script>
<script src="js/controllers/quizBasicController.js" type="text/javascript"></script>
<script src="js/constants/quizConstants.js" type="text/javascript"></script>
</html>